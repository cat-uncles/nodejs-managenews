<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>用户中心</title>
	<link rel="stylesheet" type="text/css" href="/news/css/reset.css">
    <link rel="stylesheet" type="text/css" href="/news/css/main.css">
    <script type="text/javascript" src="/news/js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="/news/js/jquery.form.min.js"></script>
    <script src="/news/tinymce/js/tinymce/tinymce.min.js"></script>
    <script src="/news/js/tinymce_setup.js"></script>
    <script type="text/javascript" src="/news/js/user_news_release.js"></script>
</head>
<body class="inframe_body">
    <form class="release_form">
        <h3>新闻发布</h3>
        <div class="form-group"><label>新闻标题：</label><input type="text" class="input_txt2" name="title" autocomplete="off"></div>
        <div class="form-group">
            <label>新闻分类：</label>
            <select class="sel_opt" name="category_id">
                <option value="2">股市</option>
                <option value="3">债市</option>
                <option value="4">商品</option>
                <option value="5">外汇</option>
                <option value="6">公司</option>
            </select>
        </div>
        <div class="form-group"><label>摘要：</label><textarea class="input_multxt" name="digest"></textarea></div>
        <div class="form-group"><label>上传图片：</label><input type="file" name="index_image" class="input_file" onchange="changepic()"></div>

        <script>
            // 这个js实现函数与ajax没有任何关系，只触及了两个点，1.<input type="file"> 2.实例化FileReader() -- 就是实现了把图片传到后台了（当然后端也要先安装引入好 multer 来接收，具体看后端代码）
            function changepic() {
                var reads = new FileReader();
                f = document.getElementById('upload_file').files[0];
                reads.readAsDataURL(f); 
                reads.onload = function (e) { 
                    document.getElementById('now_user_pic').src = this.result;
                    console.log(this.result);
                };
            };
        </script>

        <div class="form-group">
            <label>内容：</label>
            <div class="fl"><input class="input_area" id="rich_content" name="content" value=" "/></div>
        </div>
        <div class="form-group">            
            <input type="submit" value="发 布" class="input_sub input_sub2">
        </div>
        <div class="error_tip2">错误提示</div>
    </form>
    <script>
        $(function(){
            // 父窗口高度
            window.parent.fnSetIframeHeight(900);
        })
    </script>
</body>
</html>